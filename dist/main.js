(()=>{"use strict";const e=(e,t,n,d,r)=>{let i=r;return{title:e,description:t,dueDate:n,priority:d,displayTodo:(r,l)=>{let o=document.createElement("div"),a=document.createElement("input"),c=document.createElement("h4"),p=document.createElement("h5"),s=document.createElement("h6");a.type="checkbox",a.checked=i,a.addEventListener("change",(e=>{i=e.target.checked,dispatchEvent(new Event("refresh"))}));let m=document.createElement("button");return m.textContent="X",m.style="display: block; position: absolute; top: 5px; right: 5px; color: red; background: transparent; border: none; margin: 0 0 0 auto; font-size: 1.2rem",m.addEventListener("click",(e=>{r.splice(l,1),dispatchEvent(new Event("refresh"))})),o.appendChild(m),c.innerHTML+="title: "+e,p.textContent="desc: "+t,s.textContent="due: "+n+", priority: "+d,o.style="background: rgb(255, 238, 109); padding: 1rem; width: 275px; min-height: 150px; border: 1px solid #cfcfcf; box-shadow: 2px 2px 4px rgba(0,0,0,0.3); margin: 1rem 0",o.style.textDecoration=i?"line-through":"none",o.style.position="relative",c.prepend(a),o.appendChild(c),o.appendChild(p),o.appendChild(s),o}}},t=(t,n)=>{let d=[],r=!1,i=n,l=t;return{getName:()=>l,itemList:d,appendItem:e=>{d.push(e)},renderList:function(t,n){d.sort(((e,t)=>e.priority-t.priority));let o=document.createElement("div"),a=document.createElement("h3"),c=document.createElement("input"),p=this,s=document.createElement("button");s.textContent="X",s.style="display: block; position: absolute; top: 5px; right: 5px; color: red; background: transparent; border: none; margin: 0 0 0 auto; font-size: 1.2rem",s.addEventListener("click",(e=>{t.splice(n,1),dispatchEvent(i)})),o.appendChild(s),0==r?(a.textContent=l,a.addEventListener("click",(e=>{r=!0,dispatchEvent(i)})),o.appendChild(a)):(c.value=l,c.style="font-size: 1.2rem; font-weight: bold; background: transparent; color: black; border: 1px solid white; margin: 16px 0",c.addEventListener("blur",(e=>{r=!1,l=e.target.value,dispatchEvent(i)})),o.appendChild(c));for(let e=0;e<d.length;e++){let t=d[e].displayTodo(d,e);o.appendChild(t)}let m=document.createElement("button");return m.textContent="Add Item +",m.classList.add("add-btn"),m.addEventListener("click",(t=>{let n=document.querySelectorAll(".add-btn");for(let e=0;e<n.length;e++)n[e].remove();let d=document.createElement("div"),r=document.createElement("input"),l=document.createElement("div"),a=document.createElement("button"),c=document.createElement("button");l.contentEditable=!0,d.style="background: rgb(255, 238, 109); padding: 1rem; width: 275px; min-height: 150px; border: 1px solid #cfcfcf; box-shadow: 2px 2px 4px rgba(0,0,0,0.3); margin: 1rem 0",d.style.display="flex",d.style.flexDirection="column",r.style.marginBottom="0.5rem",l.style.flexGrow="1",l.style.overflowWrap="anywhere",r.value="Title",l.textContent="Description",a.textContent="Save",c.textContent="Delete",a.addEventListener("click",(t=>{p.appendItem(e(r.value,l.textContent,2021,1)),dispatchEvent(i)})),c.addEventListener("click",(e=>{dispatchEvent(i)})),d.appendChild(r),d.appendChild(l),d.appendChild(a),d.appendChild(c),o.appendChild(d).focus()})),o.appendChild(m),o.style="position: relative; padding: 1rem; margin: 0.5rem 0 0.5rem 0.7rem; width: max-content; height: 0%; background: white; flex-shrink: 0;",m.style="display: block; margin: 0 0 0 auto",o}}},n=document.querySelector("#container");(()=>{let d=[],r=new Event("refresh"),i=document.createElement("div"),l=document.createElement("div");document.querySelector("body").style="background: #1f1f1f;";let o=t("default",r);o.appendItem(e("Hello","test desc H",2020,1,!1)),o.appendItem(e("2","test desc 1",2020,2,!1)),o.appendItem(e("3","test desc 2",2020,2,!1)),d.push(o);let a=t("spare",r);a.appendItem(e("a","test desc a",2020,1,!1)),a.appendItem(e("B","test desc b",2020,3,!1)),a.appendItem(e("c","test desc c",2020,2,!1)),a.appendItem(e("D","test desc d",2020,4,!0)),d.push(a),addEventListener("refresh",(()=>{console.log("refresh"),p(),c()})),l.style="position: fixed; top: 0; left: 0; width: 250px; height: 100vh; background: #3f3f3f; text-align:center; color: white; font-size: 1.3rem;",i.style="margin-left: 250px;",n.appendChild(l),n.appendChild(i);const c=()=>{l.textContent="";for(let e=0;e<d.length;++e){let t=document.createElement("h5");t.textContent=d[e].getName(),l.appendChild(t)}let e=document.createElement("button");e.textContent="Add List +",e.style="width: 90%; padding: 0.3rem 0; font-size: 1rem;font-weight: bold;",e.addEventListener("click",(e=>{let n=t("New List",r);d.push(n),p(),c()})),l.appendChild(e)},p=()=>{i.textContent="";let e=document.createElement("div");e.style="display: flex; flex-direction: row;";for(let t=0;t<d.length;t++){let n=d[t].renderList(d,t);e.appendChild(n)}i.appendChild(e);let n=document.createElement("button");n.textContent="Add List +",n.addEventListener("click",(e=>{let n=t("New List",r);d.push(n),p(),c(),n.focus()})),i.appendChild(n)};p(),c()})()})();