(()=>{"use strict";const e=(e,t,n,l,o)=>{let r=o,i=l;const d=()=>i;return{title:e,description:t,dueDate:n,priority:i,getPriority:d,displayTodo:(l,o)=>{let d=document.createElement("div"),a=document.createElement("input"),p=document.createElement("h4"),s=document.createElement("p"),c=document.createElement("h6"),m=document.createElement("h6");a.type="checkbox",a.checked=r,a.addEventListener("change",(e=>{r=e.target.checked,dispatchEvent(new Event("refresh"))}));let u=document.createElement("button");return u.textContent="X",u.style="display: block; position: absolute; top: 5px; right: 5px; color: red; background: transparent; border: none; margin: 0 0 0 auto; font-size: 1.2rem",u.addEventListener("click",(e=>{l.splice(o,1),dispatchEvent(new Event("refresh"))})),d.appendChild(u),d.addEventListener("dblclick",(l=>{let o=document.querySelectorAll(".add-btn");for(let e=0;e<o.length;e++)o[e].remove();let r=document.createElement("input"),a=document.createElement("div"),h=document.createElement("input"),g=document.createElement("input"),b=document.createElement("button");r.value=e,a.textContent=t,h.value=new Date(c.innerText.substring(5)),g.value=i,b.textContent="SAVE",console.log(i),a.contentEditable=!0,h.type="date",g.type="number",g.setAttribute("id","priority-input"),d.style="position: relative; background: rgb(255, 238, 109); padding: 1rem 1rem 2rem; width: 275px; min-height: 150px; border: 1px solid #cfcfcf; box-shadow: 2px 2px 4px rgba(0,0,0,0.3); margin: 1rem 0",d.style.display="flex",d.style.flexDirection="column",r.style="background: transparent; border: 1px dashed black; margin-bottom: 0.5rem; outline: none",a.style.flexGrow="1",a.style.overflowWrap="anywhere",a.style.border="1px dashed black",a.style.outline="none",a.style.whiteSpace="pre-line",h.style="position: absolute; bottom: 5px; left: 5px; font-size: 0.8rem",g.style="position: absolute; bottom: 5px; right: 5px; font-size: 0.8rem; width: 2.3rem",b.style="position: absolute; right: 55px; bottom: 5px",b.addEventListener("click",(l=>{e=r.value,t=a.innerText,n=null!=h.valueAsDate?h.valueAsDate.toDateString():n,i=document.getElementById("priority-input").value,dispatchEvent(new Event("refresh"))})),p.replaceWith(r),s.replaceWith(a),c.replaceWith(h),m.replaceWith(g),d.appendChild(b),u.remove()})),p.innerHTML+=""+e,s.textContent=""+t,c.textContent="due: "+n,m.textContent="priority: "+i,p.style="margin: 0",c.style="position: absolute; left: 5px; bottom:-20px",m.style="position: absolute; right: 5px; bottom: -20px",s.style="white-space: pre-wrap; overflow-wrap: anywhere; font-size: 0.8rem;",d.style="background: rgb(255, 238, 109); padding: 1rem; width: 275px; min-height: 150px; border: 1px solid #cfcfcf; box-shadow: 2px 2px 4px rgba(0,0,0,0.3); margin: 1rem 0",d.style.textDecoration=r?"line-through":"none",d.style.position="relative",p.prepend(a),d.appendChild(p),d.appendChild(s),d.appendChild(c),d.appendChild(m),d},getItemData:()=>{let l=d();return{title:e,description:t,dueDate:n,priority:l}}}},t=(t,n)=>{let l=[],o=!1,r=n,i=t;return{getName:()=>i,itemList:l,appendItem:e=>{l.push(e)},renderList:function(t,n){l.sort(((e,t)=>e.getPriority()-t.getPriority()));let d=document.createElement("div"),a=document.createElement("h3"),p=document.createElement("input"),s=this,c=document.createElement("button");c.textContent="X",c.style="display: block; position: absolute; top: 5px; right: 5px; color: red; background: transparent; border: none; margin: 0 0 0 auto; font-size: 1.2rem",c.addEventListener("click",(e=>{t.splice(n,1),dispatchEvent(r)})),d.appendChild(c),0==o?(a.textContent=i,a.addEventListener("click",(e=>{o=!0,dispatchEvent(r)})),d.appendChild(a)):(p.value=i,p.style="font-size: 1.2rem; font-weight: bold; background: transparent; color: black; border: 1px dashed black; margin: 16px 0",p.addEventListener("blur",(e=>{o=!1,i=e.target.value,dispatchEvent(r)})),d.appendChild(p));for(let e=0;e<l.length;e++){let t=l[e].displayTodo(l,e);d.appendChild(t)}let m=document.createElement("button");return m.textContent="Add Item +",m.classList.add("add-btn"),m.addEventListener("click",(()=>{!function(t,n){let l=document.querySelectorAll(".add-btn");for(let e=0;e<l.length;e++)l[e].remove();let o=document.createElement("div"),i=document.createElement("input"),d=document.createElement("div"),a=document.createElement("button"),p=document.createElement("button"),s=document.createElement("input"),c=document.createElement("input");d.contentEditable=!0,s.type="date",c.type="number",c.valueAsNumber=0,o.style="position: relative; background: rgb(255, 238, 109); padding: 1rem 1rem 2rem; width: 275px; min-height: 150px; border: 1px solid #cfcfcf; box-shadow: 2px 2px 4px rgba(0,0,0,0.3); margin: 1rem 0",o.style.display="flex",o.style.flexDirection="column",i.style="background: transparent; border: 1px dashed black; margin-bottom: 0.5rem; outline: none",d.style.flexGrow="1",d.style.overflowWrap="anywhere",d.style.border="1px dashed black",d.style.outline="none",s.style="position: absolute; bottom: 5px; left: 5px; font-size: 0.8rem",c.style="position: absolute; bottom: 5px; right: 5px; font-size: 0.8rem; width: 2.3rem",i.value="Title",d.textContent="Description",a.textContent="Save",p.textContent="Delete",a.addEventListener("click",(n=>{null!=s.valueAsDate&&(t.appendItem(e(i.value,d.innerText,s.valueAsDate.toDateString(),c.valueAsNumber)),console.log(d.innerText),dispatchEvent(r))})),p.addEventListener("click",(e=>{dispatchEvent(r)})),o.appendChild(i),o.appendChild(d),o.appendChild(s),o.appendChild(c),n.appendChild(o).scrollIntoView(),n.appendChild(a),n.appendChild(p)}(s,d)})),d.appendChild(m),d.style="position: relative; padding: 1rem; margin: 0.5rem 0 0.5rem 0.7rem; width: max-content; height: 0%; background: white; flex-shrink: 0;",m.style="display: block; margin: 0 0 0 auto",d},getListData:()=>{let e=[];for(let t=0;t<l.length;t++)e.push(l[t].getItemData());return e}}},n=document.querySelector("#container");(()=>{let l=[],o=new Event("refresh"),r=document.createElement("div"),i=document.createElement("div");if(document.querySelector("body").style="background: #1f1f1f;",void 0!==typeof Storage){let n=JSON.parse(localStorage.getItem("todo-lists"));if(null!=n){console.log(n);for(let r=0;r<n.length;r++){let i=n[r],d=t(i.name,o);for(let t=0;t<i.itemList.length;t++){let n=i.itemList[t];d.appendItem(e(n.title,n.description,n.dueDate,n.priority))}l.push(d)}}else{let n=t("default",o);n.appendItem(e("Hello","test desc H",2020,1,!1)),n.appendItem(e("2","test desc 1",2020,2,!1)),n.appendItem(e("3","test desc 2",2020,2,!1)),l.push(n)}}else{let n=t("default",o);n.appendItem(e("Hello","test desc H",2020,1,!1)),n.appendItem(e("2","test desc 1",2020,2,!1)),n.appendItem(e("3","test desc 2",2020,2,!1)),l.push(n)}addEventListener("refresh",(()=>{if(console.log("refresh"),a(),d(),null!=typeof Storage){let e=[];for(let t=0;t<l.length;t++){let n=l[t].getName(),o=l[t].getListData();e.push({name:n,itemList:o})}localStorage.setItem("todo-lists",JSON.stringify(e))}})),i.style="position: fixed; top: 0; left: 0; width: 250px; height: 100vh; background: #3f3f3f; text-align:center; color: white; font-size: 1.3rem;",r.style="margin-left: 250px;",n.appendChild(i),n.appendChild(r);const d=()=>{i.textContent="";for(let e=0;e<l.length;++e){let t=document.createElement("h5");t.textContent=l[e].getName(),i.appendChild(t)}let e=document.createElement("button");e.textContent="Add List +",e.style="width: 90%; padding: 0.3rem 0; font-size: 1rem;font-weight: bold;",e.addEventListener("click",(e=>{let n=t("New List",o);l.push(n),a(),d()})),i.appendChild(e)},a=()=>{r.textContent="";let e=document.createElement("div");e.style="display: flex; flex-direction: row;";for(let t=0;t<l.length;t++){let n=l[t].renderList(l,t);e.appendChild(n)}r.appendChild(e)};a(),d()})()})();